# T-04 — Mock 정책을 수동으로 갈지 라이브러리로 갈지

## 문맥
- Mock 규칙은 테스트 유지보수성의 핵심이다. 너무 자유로우면 테스트가 난잡해지고, 너무 무겁게 가면 작성 속도가 떨어진다.

## 선택지별 트레이드오프
### A) 수동 mock 우선
- 트레이드오프: 의도가 코드에 직접 드러나지만 중복 boilerplate가 늘기 쉽다.
- 되돌리기 비용(코드 변경량): 100줄 미만

### B) spy/mock 라이브러리 도입
- 트레이드오프: 표현력과 재사용성은 좋아지지만 도구 의존성이 강해진다.
- 되돌리기 비용(코드 변경량): 300줄 미만

## 질문 중요도
- 최대 되돌리기 비용: 300줄 미만
- 중요도: 높음 (되돌릴 때 바뀌는 코드 경로의 폭 기준)

## 결정 체크포인트
- 선택 즉시 영향받는 영역: 포트 인터페이스, 핸들러/서비스 분기, 테스트 전략
- 결정 후 확인할 지표: 회귀 실패율, PR 크기, 리팩토링 단계 충돌 건수
