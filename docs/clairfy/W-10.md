# W-10 — soma와 soma-work 간 계약 동기화를 어떻게 유지할지

## 문맥
- 비병합 기간이 길어지면 문서/코드 계약이 쉽게 드리프트 난다. 동기화 방식은 장기 유지비를 좌우한다.

## 선택지별 트레이드오프
### A) 문서 동기화(수동)
- 트레이드오프: 비용이 낮지만 드리프트 탐지가 늦다.
- 되돌리기 비용(코드 변경량): 10줄 미만

### B) contract test 동기화
- 트레이드오프: 드리프트 탐지가 빠르지만 테스트 유지보수 비용이 든다.
- 되돌리기 비용(코드 변경량): 100줄 미만

### C) shared schema package
- 트레이드오프: 계약 일관성은 가장 강하지만 리포 간 릴리즈 의존성이 생긴다.
- 되돌리기 비용(코드 변경량): 500줄 미만

## 질문 중요도
- 최대 되돌리기 비용: 500줄 미만
- 중요도: 매우 높음 (되돌릴 때 바뀌는 코드 경로의 폭 기준)

## 결정 체크포인트
- 선택 즉시 영향받는 영역: 식별자 스키마, 세션 키, 권한/저장소 partition, 채널 어댑터 계약
- 결정 후 확인할 지표: 세션 충돌 건수, 권한 오판률, adapter 변경량, cross-repo 드리프트 건수
