# W-01 — tenant 식별자를 Abstraction A에 필수로 넣을지

## 문맥
- soma-work는 Slack team/workspace 문맥이 존재하고, 향후 다중 workspace를 다루려면 tenant 경계가 메시지 계약에 먼저 올라와야 한다.

## 선택지별 트레이드오프
### A) 미적용(single-tenant 가정)
- 트레이드오프: 초기 구현은 빠르지만 멀티테넌트 확장 시 포트/저장소 키를 대규모로 다시 바꿔야 한다.
- 되돌리기 비용(코드 변경량): 그 이상

### B) optional tenantId
- 트레이드오프: 점진 도입이 가능하지만 null/기본값 분기 관리가 늘어난다.
- 되돌리기 비용(코드 변경량): 300줄 미만

### C) required tenantId
- 트레이드오프: 초기 설정/검증 비용이 늘지만 구조적 일관성은 가장 높다.
- 되돌리기 비용(코드 변경량): 100줄 미만

## 질문 중요도
- 최대 되돌리기 비용: 그 이상
- 중요도: 최상 (되돌릴 때 바뀌는 코드 경로의 폭 기준)

## 결정 체크포인트
- 선택 즉시 영향받는 영역: 식별자 스키마, 세션 키, 권한/저장소 partition, 채널 어댑터 계약
- 결정 후 확인할 지표: 세션 충돌 건수, 권한 오판률, adapter 변경량, cross-repo 드리프트 건수
