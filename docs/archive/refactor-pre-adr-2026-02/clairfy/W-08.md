# W-08 — 멀티테넌트 auth 경계를 global/tenant/policy-provider 중 어디에 둘지

## 문맥
- Telegram 단일 allowlist 모델에서 Slack 멀티테넌트로 가면 인증 정책 단위가 달라진다.

## 선택지별 트레이드오프
### A) global allowlist
- 트레이드오프: 구현은 단순하지만 tenant별 권한 운영이 어렵다.
- 되돌리기 비용(코드 변경량): 300줄 미만

### B) tenant allowlist
- 트레이드오프: 현실적인 운영이 가능하지만 tenant 메타데이터 관리가 필요하다.
- 되돌리기 비용(코드 변경량): 300줄 미만

### C) policy provider(외부 정책 엔진)
- 트레이드오프: 확장성은 높지만 v3 범위 대비 과설계일 수 있다.
- 되돌리기 비용(코드 변경량): 500줄 미만

## 질문 중요도
- 최대 되돌리기 비용: 500줄 미만
- 중요도: 매우 높음 (되돌릴 때 바뀌는 코드 경로의 폭 기준)

## 결정 체크포인트
- 선택 즉시 영향받는 영역: 식별자 스키마, 세션 키, 권한/저장소 partition, 채널 어댑터 계약
- 결정 후 확인할 지표: 세션 충돌 건수, 권한 오판률, adapter 변경량, cross-repo 드리프트 건수
